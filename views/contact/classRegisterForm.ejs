<div class="form-header">
  <h2 class="form-title">Đăng ký tìm gia sư</h2>
  <button type="button" class="close-form-btn" data-form="classForm">
    &times;
  </button>
</div>
<form action="/classes/create" method="POST" class="contact-form">
  <div class="mb-3">
    <label for="parent_name" class="form-label">Tên phụ huynh</label>
    <input
      type="text"
      class="form-control"
      id="parent_name"
      name="parent_name"
      required
    />
  </div>
  
  <div class="mb-3">
    <label for="phone" class="form-label">Số điện thoại</label>
    <input 
      type="tel" 
      class="form-control" 
      id="phone" 
      name="phone" 
      pattern="[0-9]{10}" 
      maxlength="10"
      title="Vui lòng nhập đúng 10 số điện thoại"
      required 
    />
    <div class="invalid-feedback">Số điện thoại phải gồm đúng 10 chữ số</div>
  </div>
  
  <div class="row">
    <div class="col-md-6">
      <div class="mb-3">
        <label for="provinceClass" class="form-label">Thành phố</label>
        <select class="form-select" id="provinceClass" name="province" required>
          <!-- Dữ liệu sẽ được chèn tự động bởi JavaScript -->
        </select>
      </div>
    </div>
    <div class="col-md-6">
      <div class="mb-3">
        <label for="districtClass" class="form-label">Quận</label>
        <select class="form-select" id="districtClass" name="district" required>
          <!-- Dữ liệu sẽ được chèn tự động bởi JavaScript -->
        </select>
      </div>
    </div>
  </div>
  
  <div>
    <label for="specific_address" class="form-label">Địa chỉ</label>
    <input
      type="text"
      class="form-control"
      id="specific_address"
      name="specific_address"
      required
    />
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="mb-3">
        <label for="sessions_per_week" class="form-label">Số buổi/tuần</label>
        <input
          type="number"
          class="form-control"
          id="sessions_per_week"
          name="sessions_per_week"
          min="1"
          max="20"
          title="Vui lòng nhập số buổi từ 1 đến 20"
          required
        />
        <div class="invalid-feedback">Số buổi/tuần phải là số từ 1 đến 20</div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="mb-3">
        <label for="fee_per_session" class="form-label">Phí mỗi buổi (VNĐ)</label>
        <input
          type="number"
          class="form-control"
          id="fee_per_session"
          name="fee_per_session"
          min="10000"
          max="10000000"
          step="1000"
          title="Vui lòng nhập học phí từ 10,000 đến 10,000,000 VNĐ"
          required
        />
        <div class="invalid-feedback">Học phí phải từ 10,000 đến 10,000,000 VNĐ</div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="mb-3">
        <label for="subject_id" class="form-label">Môn học</label>
        <select class="form-select" id="subject_id" name="subject_id" required>
          <option value="">Chọn môn học</option>
          <% subjects.forEach(function(subject) { %>
          <option value="<%= subject.id %>"><%= subject.name %></option>
          <% }); %>
        </select>
      </div>
    </div>
    <div class="col-md-6">
      <div class="mb-3">
        <label for="grade_id" class="form-label">Cấp học</label>
        <select class="form-select" id="grade_id" name="grade_id" required>
          <option value="">Chọn cấp học</option>
          <% grades.forEach(function(grade) { %>
          <option value="<%= grade.id %>"><%= grade.name %></option>
          <% }); %>
        </select>
      </div>
    </div>
  </div>

  <div class="mb-3">
    <label for="tutor_gender" class="form-label">Yêu cầu giới tính gia sư</label>
    <select class="form-select" id="tutor_gender" name="tutor_gender" required>
      <option value="male">Nam</option>
      <option value="female">Nữ</option>
      <option value="any">Không yêu cầu</option>
    </select>
  </div>
  
  <div>
    <label for="learning_mode" class="form-label">Hình thức học</label>
    <select
      class="form-select"
      id="learning_mode"
      name="learning_mode"
      required
    >
      <option value="online">Online</option>
      <option value="offline">Offline</option>
      <option value="all">Linh hoạt</option>
    </select>
  </div>
  
  <div class="mb-3">
    <label for="description" class="form-label">Mô tả</label>
    <textarea
      class="form-control"
      id="description"
      name="description"
      required
    ></textarea>
  </div>
  
  <p></p>
  <button type="submit" class="btn btn-primary w-100">Gửi</button>
</form>

<script>
// Validation cho số điện thoại - chỉ cho phép nhập số
document.getElementById('phone').addEventListener('input', function(e) {
  // Loại bỏ tất cả ký tự không phải số
  this.value = this.value.replace(/[^0-9]/g, '');
  
  // Giới hạn 10 số
  if (this.value.length > 10) {
    this.value = this.value.slice(0, 10);
  }
});

// Validation cho số buổi/tuần
document.getElementById('sessions_per_week').addEventListener('input', function(e) {
  const value = parseInt(this.value);
  if (this.value !== '' && (isNaN(value) || value < 1 || value > 20)) {
    this.setCustomValidity('Số buổi/tuần phải từ 1 đến 20');
  } else {
    this.setCustomValidity('');
  }
});

// Validation cho học phí
document.getElementById('fee_per_session').addEventListener('input', function(e) {
  const value = parseInt(this.value);
  if (this.value !== '' && (isNaN(value) || value < 10000 || value > 10000000)) {
    this.setCustomValidity('Học phí phải từ 10,000 đến 10,000,000 VNĐ');
  } else {
    this.setCustomValidity('');
  }
});

// Form validation khi submit
document.querySelector('.contact-form').addEventListener('submit', function(e) {
  const phone = document.getElementById('phone').value;
  const sessionsPerWeek = document.getElementById('sessions_per_week').value;
  const feePerSession = document.getElementById('fee_per_session').value;
  
  // Kiểm tra số điện thoại
  if (!/^[0-9]{10}$/.test(phone)) {
    e.preventDefault();
    alert('Số điện thoại phải gồm đúng 10 chữ số');
    return false;
  }
  
  // Kiểm tra số buổi/tuần
  const sessions = parseInt(sessionsPerWeek);
  if (isNaN(sessions) || sessions < 1 || sessions > 20) {
    e.preventDefault();
    alert('Số buổi/tuần phải từ 1 đến 20');
    return false;
  }
  
  // Kiểm tra học phí
  const fee = parseInt(feePerSession);
  if (isNaN(fee) || fee < 10000 || fee > 10000000) {
    e.preventDefault();
    alert('Học phí phải từ 10,000 đến 10,000,000 VNĐ');
    return false;
  }
});
</script>
